# Generated by PNCconf at Mon May  8 15:27:52 2017
# Änderungen an dieser Datei werden beim nächsten
# overwritten when you run PNCconf again

[EMC]
MACHINE = Biesse_Rover_342
DEBUG = 0
VERSION = 1.1

[DISPLAY]
DISPLAY = probe_basic
#DISPLAY = gmoccapy
#DISPLAY = axis
POSITION_OFFSET = RELATIVE
POSITION_FEEDBACK = ACTUAL
MAX_FEED_OVERRIDE = 2.000000
MAX_SPINDLE_OVERRIDE = 1.500000
MIN_SPINDLE_OVERRIDE = 0.500000
DEFAULT_SPINDLE_SPEED = 8000
INTRO_GRAPHIC = linuxcnc.gif
INTRO_TIME = 1
PROGRAM_PREFIX = /home/robert/linuxcnc/nc_files
#INCREMENTS =  5mm 1mm .5mm .1mm .05mm .01mm .005mm
INCREMENTS = 5 1 .5 1 .05 .01 .005 0
POSITION_FEEDBACK = ACTUAL
DEFAULT_LINEAR_VELOCITY = 25.000000
MAX_LINEAR_VELOCITY = 100.000000
MIN_LINEAR_VELOCITY = 0.500000
DEFAULT_ANGULAR_VELOCITY = 12.000000
MAX_ANGULAR_VELOCITY = 180.000000
MIN_ANGULAR_VELOCITY = 1.666667
EDITOR = gedit
GEOMETRY = xyz
CYCLE_TIME = 200
MAX_RAPID_OVERRIDE = 1
#EMBED_TAB_NAME=Probe Screen
#EMBED_TAB_LOCATION=ntb_user_tabs
#EMBED_TAB_COMMAND=halcmd loadusr -Wn gladevcp gladevcp -c gladevcp -x {XID} -u python/probe_screen.py -H probe_icons/probe_screen.hal probe_icons/probe_screen.glade

[VTK]
# VTK_Widget Options
MACHINE_BOUNDRY = False
MACHINE_TICKS = False
MACHINE_LABELS = False

PROGRAM_BOUNDRY = False
PROGRAM_TICKS = False
PROGRAM_LABELS = False
GRID_LINES = False


[TOOLSENSOR]
# Absolute coordinates of the toolsetter pad 
X = 500
Y = -500
# Absolute Z start search coordinates
Z = 0
# Maximum search distance and direction (sign)
MAXPROBE = -60
# Speed of movements during working in Probe Screen
RAPID_SPEED= 600
# Diameter of toolsetter pad 
TS_DIAMETER = 10
# The speed of the reverse rotation of the spindle when measuring the tool diameter
REV_ROTATION_SPEED = 300

[CHANGE_POSITION]
# Abs coordinates tool change point
X = 500
Y = -500
Z = 0

[FILTER]
PROGRAM_EXTENSION = .png,.gif,.jpg Greyscale Depth Image
PROGRAM_EXTENSION = .py Python Script
png = image-to-gcode
gif = image-to-gcode
jpg = image-to-gcode
py = python

[TASK]
TASK = milltask
CYCLE_TIME = 0.01

[RS274NGC]
PARAMETER_FILE = linuxcnc.var
SUBROUTINE_PATH = nc_subroutines:../../nc_files/remap_lib/common_nc_subs

#ON_ABORT_COMMAND = O <on_abort> call

# ------ remapping toolchange - related codes ----------------------
#
# see python/remap.py for the prolog and epilog handlers
# see nc_files/remap-subroutines for the NGC procedures
#
# the prepare_min.ngc and change_min.ngc are templates - fill in as needed
REMAP= M6   modalgroup=6  prolog=change_prolog   ngc=rack_change  epilog=change_epilog

[EMCMOT]
EMCMOT = motmod
COMM_TIMEOUT = 1.0
COMM_WAIT = 0.010
SERVO_PERIOD = 1000000
#BASE_PERIOD = 2000000

[HOSTMOT2]
# **** This is for info only ****
#DRIVER0=hm2_spi
#BOARD0=mesa7i90

[HAL]
HALUI = halui
HALFILE = Biesse_Rover_342.hal
#HALFILE = custom.hal
POSTGUI_HALFILE = postgui_call_list.hal
SHUTDOWN = shutdown.hal

[HALUI]

[KINS]
JOINTS = 3
KINEMATICS = trivkins coordinates=XYZ

[TRAJ]
COORDINATES =  X Y Z
LINEAR_UNITS = mm
ANGULAR_UNITS = degree
CYCLE_TIME = 0.01
DEFAULT_LINEAR_VELOCITY = 100
# 60 m/min
MAX_LINEAR_VELOCITY = 1000
SPINDLES = 1

[EMCIO]
EMCIO = io
CYCLE_TIME = 0.100
TOOL_TABLE = tool.tbl

#********************

# Joint 0
[JOINT_0]
#********************
TYPE = LINEAR
HOME = 0.0
FERROR = 10.0
MIN_FERROR = 1
# 1333
MAX_VELOCITY = 1333
# 7400
MAX_ACCELERATION = 1700
P = 14.2
I = 0.01
D = 0
FF0 = 0
FF1 = 0.9927
FF2 = 0.0034
BIAS = -0.463
DEADBAND = 0
MAX_OUTPUT = 1333
# 32mm/rev, 4000 pulses/rev
ENCODER_SCALE = 124.97
# 10V (=100%) equals ca. 100m/s
OUTPUT_SCALE = 1600
MIN_LIMIT = -40.0
MAX_LIMIT = 3950.0
#HOME_OFFSET = 15.200
HOME_OFFSET=0.0000
HOME_SEARCH_VEL = -50.0
HOME_LATCH_VEL = 0.500000
HOME_FINAL_VEL = 0.000000
HOME_USE_INDEX = yes
HOME_IGNORE_LIMITS = YES
HOME_SEQUENCE = 1
# Axis X
#********************
[AXIS_X]
MAX_VELOCITY = 1000
MAX_ACCELERATION = 1200
MIN_LIMIT = -25.0
MAX_LIMIT = 3930.0


#********************

# Joint 1
[JOINT_1]
#********************
TYPE = LINEAR
HOME = 0.0
FERROR = 10.0
MIN_FERROR = 1
MAX_VELOCITY = 600
# 6150
MAX_ACCELERATION = 1300
P = 13.7
I = 0.01
D = 0
FF0 = 0
FF1 = 0.846
FF2 = 0.00065
BIAS = 0.2443
DEADBAND = 0
MAX_OUTPUT = 850
# 12mm/rev, 4000 pulses per rev
#ENCODER_SCALE = 333.3333
ENCODER_SCALE = -250.2
# 10V (=100%) equals ca. 126,5m/s
OUTPUT_SCALE = -1000
MAX_LIMIT = 15.0
MIN_LIMIT = -1315.0
#HOME_OFFSET = -3.8
HOME_OFFSET=0.0000
HOME_SEARCH_VEL = 50.000000
HOME_LATCH_VEL = -0.500000
HOME_FINAL_VEL = 0.000000
HOME_USE_INDEX = YES
HOME_IGNORE_LIMITS = YES
HOME_SEQUENCE = 2
# Axis Y
#********************
[AXIS_Y]
MAX_VELOCITY = 600
MAX_ACCELERATION = 1200
MAX_LIMIT = 10.0
MIN_LIMIT =-1310.0


#********************

# Joint 2
[JOINT_2]
#********************
TYPE = LINEAR
HOME = 0.0
FERROR = 10.0
MIN_FERROR = 1.0
MAX_VELOCITY = 250
MAX_ACCELERATION = 500
P = 200
I = 30
D = 0
FF0 = 0
FF1 = 1
FF2 = 0.00165
BIAS = 0.081
DEADBAND = 0
MAX_OUTPUT = 500
# 5mm/rev, 400 pulses per rev
ENCODER_SCALE = -800
# 10V (=100%) equals ca. 21,7m/s
OUTPUT_SCALE = -294
MAX_LIMIT = 9.5
MIN_LIMIT = -107.5
#HOME_OFFSET = -2.6000000
HOME_OFFSET = 5.0000
HOME_SEARCH_VEL = 10.000000
HOME_LATCH_VEL = -0.500000
HOME_FINAL_VEL = 0.000000
HOME_USE_INDEX = yes
HOME_IGNORE_LIMITS = YES
HOME_SEQUENCE = 0
# Axis Z
#********************
[AXIS_Z]
MAX_VELOCITY = 2500
MAX_ACCELERATION = 500
MAX_LIMIT = 4.5
MIN_LIMIT = -107.5


#********************
# Spindle
#********************
[SPINDLE_9]
P = 0
I = 0
D = 0
FF0 = 1
FF1 = 0
FF2 = 0
BIAS = 0
DEADBAND = 0
MAX_OUTPUT = 2000
# 10V = 100% = 24000UPM
OUTPUT_SCALE = 24000


#********************
# Toolchanger stuff
#********************
[PYTHON]
PATH_PREPEND=./python
PATH_APPEND=../../nc_files/remap_lib/python-stdglue/

TOPLEVEL=python/toplevel.py
LOG_LEVEL=15

[TOOL_CHANGER]


[TOOL_CHANGER_POCKET_1]

[TOOL_CHANGER_POCKET_2]

[TOOL_CHANGER_POCKET_3]

[TOOL_CHANGER_POCKET_4]

[TOOL_CHANGER_POCKET_5]

[TOOL_CHANGER_POCKET_6]

[TOOL_CHANGER_POCKET_7]

[TOOL_CHANGER_POCKET_8]

[TOOL_CHANGER_POCKET_9]

[TOOL_CHANGER_POCKET_10]
